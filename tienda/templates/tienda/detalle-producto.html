{% extends 'core/base.html' %}
{% load static %}
{% block content %}

<!--Inner Header Start-->
<section class="wf100 p100 inner-header"
         style="background-image: url({% static 'images/cabezatiendadetalle.png' %}); background-size: cover; background-position: center;">
    <div class="container">
        <h1>Tienda</h1>
        <ul>
            <li><a href="{% url 'home' %}">Inicio</a></li>
            <li><a href="{% url 'tienda' %}">Productos</a></li>
            <li><a href="#">Detalle del producto</a></li>
        </ul>
    </div>
</section>
<!--Inner Header End-->

<section class="wf100 p80 shop">
    <div class="product-details">
        <div class="container">
            <!-- Producto -->
            <div class="row">
                <div class="col-md-6">
                    <div class="pro-large">
                        {% if producto.imagen_portada %}
                        <img src="{{ producto.imagen_portada.url }}" alt="{{ producto.titulo }}">
                        {% else %}
                        <img src="{% static 'images/placeholder.png' %}" alt="{{ producto.titulo }}">
                        {% endif %}
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="product-text">
                        <h2>{{ producto.titulo }}</h2>

                        <!-- (Opcional) rating estático como en el HTML original -->
                        <div class="pro-rating">
                            <a href="#"><i class="fas fa-star"></i> <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i> <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i></a>
                        </div>

                        <div class="pro-pricing">
                            {% if producto.precio_tachado %}
                            <del>${{ producto.precio_tachado }}</del>
                            {% endif %}
                            ${{ producto.precio }}
                        </div>

                        {% if producto.descripcion_corta %}
                        <p><strong>{{ producto.descripcion_corta }}</strong></p>
                        {% endif %}
                        {% if producto.descripcion %}
                        <p>{{ producto.descripcion|linebreaksbr }}</p>
                        {% endif %}

                        <div class="add-2-cart">
                            <strong>Cantidad:</strong>
                            <input type="number" name="quantity" min="1" max="99" value="1">
                            <input type="submit" value="Add to Cart" name="Add to Cart">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="row">
                <div class="col-md-12">
                    <div class="products-tabs wf100 p80">
                        <nav>
                            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                <a class="nav-item nav-link active" id="nav-one-tab" data-toggle="tab"
                                   href="#nav-one" role="tab" aria-controls="nav-one" aria-selected="true">
                                    Description
                                </a>
                                <a class="nav-item nav-link" id="nav-two-tab" data-toggle="tab"
                                   href="#nav-two" role="tab" aria-controls="nav-two" aria-selected="false">
                                    Additional Information
                                </a>
                            </div>
                        </nav>

                        <div class="tab-content" id="nav-tabContent">
                            <div class="tab-pane fade show active" id="nav-one" role="tabpanel"
                                 aria-labelledby="nav-one-tab">
                                {% if producto.descripcion %}
                                <p>{{ producto.descripcion|linebreaksbr }}</p>
                                {% else %}
                                <p>No hay descripción disponible.</p>
                                {% endif %}
                            </div>

                            <div class="tab-pane fade" id="nav-two" role="tabpanel" aria-labelledby="nav-two-tab">
                                <!-- Si en el futuro agregas campos extra al modelo (peso, dimensiones, etc.), muéstralos aquí -->
                                <table>
                                    <tr>
                                    <tr>
                                        <td>Categoría</td>
                                        <td>
                                            {% if producto.categoria %}
                                            {{ producto.categoria.nombre }}
                                            {% else %}
                                            —
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Creado</td>
                                        <td>{{ producto.creado|date:"d/m/Y H:i" }}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Relacionados -->
            {% if relacionados %}
            <section class="online-shop wf100">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12"><h2>Related Products</h2></div>
                    </div>
                    <div class="row">
                        {% for r in relacionados %}
                        <div class="col-md-3 col-sm-6">
                            <div class="product-box">
                                <div class="pro-thumb">
                                    <a href="{% url 'detalle-producto' r.slug %}">Add To Cart</a>
                                    {% if r.imagen_portada %}
                                    <img src="{{ r.imagen_portada.url }}" alt="{{ r.titulo }}">
                                    {% else %}
                                    <img src="{% static 'images/placeholder.png' %}" alt="{{ r.titulo }}">
                                    {% endif %}
                                </div>
                                <div class="pro-txt">
                                    <h6><a href="{% url 'detalle-producto' r.slug %}">{{ r.titulo }}</a></h6>
                                    <p class="pro-price">
                                        {% if r.precio_tachado %}
                                        <del>${{ r.precio_tachado }}</del>
                                        {% endif %}
                                        ${{ r.precio }}
                                    </p>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </section>
            {% endif %}

        </div>
    </div>
</section>
<!--Blog End-->

{% endblock %}
